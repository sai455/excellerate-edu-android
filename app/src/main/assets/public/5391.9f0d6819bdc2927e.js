"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5391],{5391:(W,_,a)=>{a.r(_),a.d(_,{CalenderPageModule:()=>L});var h=a(177),g=a(4341),l=a(3465),f=a(9522),v=a(467),D=a(3125),C=a(1626),I=a(1840),y=a(4808),e=a(4438),E=a(2571),M=a(369),F=a(6886),P=a(5493);const T=()=>({day:"2-digit",month:"short",year:"numeric"}),w=o=>({date:o}),k=()=>[0,1,2,3,4,5,6,7,8,9,10];function R(o,c){1&o&&(e.j41(0,"ion-card")(1,"ion-row")(2,"ion-col",5),e.nrm(3,"ion-skeleton-text",6),e.k0s()(),e.j41(4,"ion-row")(5,"ion-col",5),e.nrm(6,"ion-skeleton-text",6),e.k0s()()())}function j(o,c){1&o&&(e.j41(0,"div")(1,"div"),e.EFF(2,"Loading Events....."),e.k0s(),e.j41(3,"ion-list"),e.DNE(4,R,7,0,"ion-card",4),e.k0s()()),2&o&&(e.R7$(4),e.Y8G("ngForOf",e.lJ4(1,k)))}function b(o,c){if(1&o){const t=e.RV6();e.j41(0,"div",7),e.EFF(1,"Somthing went wrong "),e.j41(2,"a",8),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.tryAgain())}),e.EFF(3," Try again"),e.k0s()()}}function S(o,c){if(1&o){const t=e.RV6();e.j41(0,"ion-button",14),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.presentModal("",0))}),e.EFF(1,"ADD NEW"),e.k0s()}}function A(o,c){1&o&&(e.j41(0,"div",15),e.EFF(1," No events found "),e.k0s())}function G(o,c){if(1&o){const t=e.RV6();e.j41(0,"ion-row")(1,"ion-col",5)(2,"ion-button",17),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,s=e.XpG(2);return e.Njj(s.presentModal(n,n.EventId))}),e.EFF(3," Edit "),e.k0s(),e.j41(4,"ion-button",18),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,s=e.XpG(2);return e.Njj(s.presentAlertConfirm(n))}),e.EFF(5," Delete "),e.k0s()()()}}function N(o,c){if(1&o&&(e.j41(0,"div")(1,"ion-row")(2,"ion-col",5)(3,"b"),e.EFF(4),e.k0s()()(),e.j41(5,"ion-row")(6,"ion-col",5),e.EFF(7," From: "),e.j41(8,"b"),e.EFF(9),e.nI1(10,"date"),e.k0s()()(),e.j41(11,"ion-row")(12,"ion-col",5),e.EFF(13," To: "),e.j41(14,"b"),e.EFF(15),e.nI1(16,"date"),e.k0s()()(),e.j41(17,"ion-row")(18,"ion-col",5)(19,"b"),e.EFF(20),e.k0s()()(),e.DNE(21,G,6,0,"ion-row",2),e.k0s()),2&o){const t=e.XpG().$implicit,i=e.XpG(2);e.R7$(4),e.JRh(t.FollowUpTitle),e.R7$(5),e.JRh(e.i5U(10,5,t.StartTime,"dd-MMM-yyyy hh:mm a")),e.R7$(6),e.JRh(e.i5U(16,8,t.EndTime,"dd-MMM-yyyy hh:mm a")),e.R7$(5),e.JRh(t.FollowUpEventNote),e.R7$(),e.Y8G("ngIf",t.CreatedBy==i.userDetails.UserId&&!i.hasStudentRole)}}function $(o,c){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"ion-row")(2,"ion-col",5)(3,"b"),e.EFF(4),e.k0s()()(),e.j41(5,"ion-row")(6,"ion-col",5)(7,"ion-text"),e.EFF(8),e.k0s()()(),e.j41(9,"ion-row")(10,"ion-col",5)(11,"ion-text"),e.EFF(12),e.k0s()()(),e.j41(13,"ion-row")(14,"ion-col",5)(15,"ion-text"),e.EFF(16),e.k0s()()(),e.j41(17,"ion-row")(18,"ion-col",5)(19,"ion-text"),e.EFF(20),e.k0s()()(),e.j41(21,"ion-row",19)(22,"ion-col",20)(23,"ion-button",17),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,s=e.XpG(2);return e.Njj(s.gotoJoinMeeting(n.MeetingInfo))}),e.nrm(24,"ion-icon",21),e.EFF(25," Join "),e.k0s()()()()}if(2&o){const t=e.XpG().$implicit;e.R7$(4),e.JRh(t.MeetingInfo.Title),e.R7$(4),e.SpI("Host : ",t.MeetingInfo.Host,""),e.R7$(4),e.SpI("Id\xa0\xa0\xa0\xa0 : ",t.MeetingInfo.MeetingId,""),e.R7$(4),e.SpI("Date : ",t.MeetingInfo.MeetingDate,""),e.R7$(4),e.SpI("Time : ",t.MeetingInfo.Time,"")}}function x(o,c){if(1&o&&(e.j41(0,"ion-card",16),e.DNE(1,N,22,11,"div",2)(2,$,26,5,"div",2),e.k0s()),2&o){const t=c.$implicit;e.R7$(),e.Y8G("ngIf",0==t.MeetingInfo.Id),e.R7$(),e.Y8G("ngIf",t.MeetingInfo.Id>0)}}function U(o,c){if(1&o){const t=e.RV6();e.j41(0,"ion-list"),e.DNE(1,S,2,0,"ion-button",9),e.j41(2,"ion-list-header",10)(3,"h4"),e.EFF(4),e.nI1(5,"date"),e.k0s()(),e.DNE(6,A,2,0,"div",11),e.j41(7,"ion-row")(8,"ion-col",5)(9,"ion-searchbar",12),e.bIt("keyup",function(n){e.eBV(t);const s=e.XpG();return e.Njj(s.onEventSearch(n))}),e.k0s()()(),e.DNE(10,x,3,2,"ion-card",13),e.k0s()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.hasStudentRole),e.R7$(3),e.SpI("Events ( ",e.i5U(5,4,t.selecetedDate,"dd-MMM-yyyy")," )"),e.R7$(2),e.Y8G("ngIf",t.selectedDateEvent&&0==t.selectedDateEvent.length&&!t.isAPiCallInProcess),e.R7$(4),e.Y8G("ngForOf",t.selectedDateEvent)}}const V=[{path:"",component:(()=>{class o{constructor(t,i,n,s,r,m,u){this.commonService=t,this.router=i,this.storage=n,this.apiCall=s,this.modalController=r,this.datePipe=m,this.alertController=u,this.highlightedDates=[],this.ticketilImage=D.l.appImages.ticketsIl,this.heading="Calendar",this.isBackRequired=!0,this.isAPiCallInProcess=!1,this.isErrorInApiCall=!1,this.selecetedDate=(new Date).toISOString(),this.calendar={mode:"month",step:30,currentDate:new Date,dateFormatter:{formatMonthViewDay:function(d){return d.getDate().toString()},formatMonthViewDayHeader:function(d){return"MonMH"},formatMonthViewTitle:function(d){return"testMT"},formatWeekViewDayHeader:function(d){return"MonWH"},formatWeekViewTitle:function(d){return"testWT"},formatWeekViewHourColumn:function(d){return"testWH"},formatDayViewHourColumn:function(d){return"testDH"},formatDayViewTitle:function(d){return"testDT"}}}}ngOnInit(){this.selectedMonthYear=this.selecetedDate,this.getCalenderEvent()}ngAfterViewInit(){const t=document.querySelector("ion-datetime");t?setTimeout(()=>{const i=t.shadowRoot;if(!i)return;const n=i.querySelector(".calendar-month-title, .calendar-header, .calendar-month-year");if(!n)return void console.warn("Calendar header not found");new MutationObserver(()=>{const m=n.textContent?.trim();if(m){const[u,d]=m.split(" "),Y=new Date,J=new Date(Date.parse(u+" 1, 2000")).getMonth(),H=parseInt(d.split("SMTWTFS")[0],10),p=new Date(Y);p.setMonth(J),p.setFullYear(H),this.selectedMonthYear=p,this.getCalenderEvent()}}).observe(n,{childList:!0,characterData:!0,subtree:!0});const r=n.textContent?.trim();if(r){const[m,u]=r.split(" ")}},500):console.warn("ion-datetime element not found")}gotoJoinMeeting(t){this.commonService.setSelectedMeeting(t),this.router.navigate(["/meetingroom/0"])}onEventSearch(t){let i=t.target.value;this.selectedDateEvent=0==i.length?this.mainList:this.mainList.filter(n=>n.FollowUpTitle.toLocaleLowerCase().includes(i.toLocaleLowerCase())||(n.MeetingInfo.Title??"").toLocaleLowerCase().includes(i.toLocaleLowerCase()))}deleteEvent(t){this.storage.get("user").then(i=>{const n=JSON.parse(i);let s=new C.Nl;s=s.append("userID",n.UserId),s=s.append("tenantName",n.TenantShortName),s=s.append("eventId",t.EventId),this.isAPiCallInProcess=!0,this.apiCall.login(I.h.urls.DeleteCalendarEvent,s).subscribe(r=>{this.isAPiCallInProcess=!1,this.isErrorInApiCall=!1,this.commonService.presentToast("Record removed successfully",3e3,"success"),this.getCalenderEvent()},r=>{this.isErrorInApiCall=!0,this.isAPiCallInProcess=!1,console.log("erorrrrrrrrrrrrrrr")})})}presentAlertConfirm(t){var i=this;return(0,v.A)(function*(){yield(yield i.alertController.create({cssClass:"my-custom-class",header:"Confirm!",backdropDismiss:!1,message:"<strong>Are you sure you wish to delete ?</strong>",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:s=>{}},{text:"Okay",handler:()=>{i.deleteEvent(t)}}]})).present()})()}getCalenderEvent(){this.storage.get("user").then(t=>{const i=JSON.parse(t);this.hasStudentRole=i.Roles.includes("Student"),this.userDetails=i;let n=new C.Nl;n=n.append("UserID",i.UserId),n=n.append("tenantName",i.TenantShortName),n=n.append("date",this.datePipe.transform(this.selectedMonthYear,"yyyy/MM/dd")||""),this.isAPiCallInProcess=!0,this.apiCall.login(I.h.urls.GetCalendarEvents,n).subscribe(s=>{this.isAPiCallInProcess=!1,this.isErrorInApiCall=!1,this.monthList=s,this.highlightedDates=(this.monthList||[]).map(r=>({date:this.datePipe.transform(r.EventDate,"yyyy-MM-dd"),textColor:r.IsHolidayEvent?"#800080":r.MeetingInfo?.Id>0?"#09721b":"rgb(68, 10, 184)",backgroundColor:r.IsHolidayEvent?"#ffc0cb":r.MeetingInfo?.Id>0?"#c8e5d0":"rgb(211, 200, 229)"})),this.setDateEvents()},s=>{this.isErrorInApiCall=!0,this.isAPiCallInProcess=!1,console.log("erorrrrrrrrrrrrrrr")})})}setDateEvents(){this.list=(this.monthList||[]).filter(t=>this.datePipe.transform(t.EventDate||t.EventDate,"yyyy-MM-dd")===this.datePipe.transform(this.selecetedDate,"yyyy-MM-dd")),this.selectedDateEvent=this.list,this.mainList=this.list}tryAgain(){this.getCalenderEvent()}onCurrentDateChanged(t){this.selecetedDate=t.detail.value,this.setDateEvents()}eventGorupBy(t,i){return t.reduce((n,s)=>((n[s[i]]=n[s[i]]||[]).push(s),n),{})}presentModal(t,i){var n=this;return(0,v.A)(function*(){0==i&&((t={}).FollowUpTitle="",t.FollowUpEventNote="",t.EndTime=(new Date).toISOString(),t.StartTime=(new Date).toISOString());const s=yield n.modalController.create({component:y.Q,showBackdrop:!0,backdropDismiss:!1,cssClass:"my-fullform-modal-css",componentProps:{modalTitle:0==i?"ADD NEW":"EDIT "+t.FollowUpTitle,eventInfo:t,tenantShortName:n.userDetails.TenantShortName}});return s.onDidDismiss().then(r=>{null!==r.data&&n.getCalenderEvent()}),yield s.present()})()}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(E.h),e.rXU(f.Ix),e.rXU(M.w),e.rXU(F.J),e.rXU(l.W3),e.rXU(h.vh),e.rXU(l.hG))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-calender"]],standalone:!1,features:[e.Jv_([h.vh])],decls:7,vars:12,consts:[[3,"title","isBackRequired"],["size","12","presentation","date","min","2025-01-01T00:00:00","max","2035-12-31T23:59:59",3,"ionChange","ngModelChange","ngModel","showDefaultTitle","highlightedDates","formatOptions"],[4,"ngIf"],["class","somthingWrong",4,"ngIf"],[4,"ngFor","ngForOf"],["size","12"],["animated","",2,"width","50%"],[1,"somthingWrong"],[3,"click"],["id","trigger-button",3,"click",4,"ngIf"],["color","primary"],["class","no-event-found",4,"ngIf"],["placeholder","Search By Title","showCancelButton","never",3,"keyup"],["class","lits-item--card",4,"ngFor","ngForOf"],["id","trigger-button",3,"click"],[1,"no-event-found"],[1,"lits-item--card"],["color","light","size","small",3,"click"],["color","danger","size","small",3,"click"],[2,"border-top","1px solid #ffffff"],["size","6"],["slot","start","name","desktop-outline"]],template:function(i,n){1&i&&(e.nrm(0,"app-header-toolbar",0),e.j41(1,"ion-content")(2,"ion-row")(3,"ion-datetime",1),e.bIt("ionChange",function(r){return n.onCurrentDateChanged(r)}),e.mxI("ngModelChange",function(r){return e.DH7(n.selecetedDate,r)||(n.selecetedDate=r),r}),e.k0s()(),e.DNE(4,j,5,2,"div",2)(5,b,4,0,"div",3)(6,U,11,7,"ion-list",2),e.k0s()),2&i&&(e.Y8G("title",n.heading)("isBackRequired",n.isBackRequired),e.R7$(3),e.R50("ngModel",n.selecetedDate),e.Y8G("showDefaultTitle",!0)("highlightedDates",n.highlightedDates)("formatOptions",e.eq3(10,w,e.lJ4(9,T))),e.R7$(),e.Y8G("ngIf",n.isAPiCallInProcess),e.R7$(),e.Y8G("ngIf",n.isErrorInApiCall),e.R7$(),e.Y8G("ngIf",!n.isAPiCallInProcess))},dependencies:[h.Sq,h.bT,g.BC,g.vS,l.Jm,l.b_,l.hU,l.W9,l.A9,l.iq,l.nf,l.AF,l.ln,l.S1,l.ds,l.IO,l.Je,l.Gw,P.M,h.vh],styles:[".event-detail-container[_ngcontent-%COMP%]{display:none!important}.no-event-found[_ngcontent-%COMP%]{position:relative;left:30%;margin-top:21%}.lits-item--holiday-card[_ngcontent-%COMP%]{background-color:pink!important}.lits-item--Meeting-card[_ngcontent-%COMP%]{background-color:#c8e5d0!important}"]})}}return o})()}];let X=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[f.iI.forChild(V),f.iI]})}}return o})();var O=a(5284),B=a(5075);let L=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[h.MD,g.YN,l.bv,X,O.ML,B.HomePageModule]})}}return o})()}}]);