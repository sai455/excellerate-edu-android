"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3485],{3485:(F,f,s)=>{s.r(f),s.d(f,{LoginPageModule:()=>O});var c=s(177),t=s(4341),r=s(3465),p=s(9522),G=s(3125),l=s(1840),h=s(1626),u=s(4451),e=s(4438),T=s(2571),S=s(6886),b=s(369),v=s(3656);function y(a,g){1&a&&(e.j41(0,"ion-col")(1,"ion-text",4),e.EFF(2," Please enter user name "),e.k0s()())}function w(a,g){if(1&a&&(e.j41(0,"ion-row"),e.DNE(1,y,3,0,"ion-col",7),e.k0s()),2&a){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.loginForm.controls.userName.errors&&(null==n.loginForm.controls.userName.errors?null:n.loginForm.controls.userName.errors.required))}}function D(a,g){1&a&&(e.j41(0,"ion-col")(1,"ion-text",4),e.EFF(2," Please enter phone number "),e.k0s()())}function L(a,g){if(1&a&&(e.j41(0,"ion-row"),e.DNE(1,D,3,0,"ion-col",7),e.k0s()),2&a){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.loginForm.controls.phoneNumber.errors&&(null==n.loginForm.controls.phoneNumber.errors?null:n.loginForm.controls.phoneNumber.errors.required))}}function E(a,g){1&a&&(e.j41(0,"span"),e.EFF(1,"("),e.j41(2,"em"),e.EFF(3,"Loading..."),e.k0s(),e.EFF(4,")"),e.k0s())}function A(a,g){if(1&a&&(e.j41(0,"ion-select-option",14),e.EFF(1),e.k0s()),2&a){const n=g.$implicit;e.Y8G("value",n.db),e.R7$(),e.SpI(" ",n.name," ")}}function M(a,g){1&a&&(e.j41(0,"ion-col")(1,"ion-text",4),e.EFF(2," Please select a tenant / institute "),e.k0s()())}function I(a,g){if(1&a&&(e.j41(0,"ion-row"),e.DNE(1,M,3,0,"ion-col",7),e.k0s()),2&a){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.loginForm.controls.tenantName.errors&&(null==n.loginForm.controls.tenantName.errors?null:n.loginForm.controls.tenantName.errors.required))}}function k(a,g){1&a&&(e.j41(0,"ion-col")(1,"ion-text",4),e.EFF(2," Please enter password "),e.k0s()())}function j(a,g){if(1&a&&(e.j41(0,"ion-row"),e.DNE(1,k,3,0,"ion-col",7),e.k0s()),2&a){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.loginForm.controls.password.errors&&(null==n.loginForm.controls.password.errors?null:n.loginForm.controls.password.errors.required))}}const x=[{path:"",component:(()=>{class a{constructor(n,i,o,m,d){this.commonService=n,this.apiCall=i,this.router=o,this.storage=m,this.platform=d,this.isMobileVerfied=!1,this.isMobileExist=!1,this.isBakcButtonRequired=!1,this.isloading=!1,this.heading=G.l.appHeadings.login,this.loginImage=G.l.appImages.loginIl,this.tenants=[{id:1,name:"Excelerate Main",db:"sims",logoPath:"SIMS/LOGO-OLD.png"}],this.loginForm=new t.gE({userName:new t.MJ("",[t.k0.required]),phoneNumber:new t.MJ("",[t.k0.required,t.k0.maxLength(10)]),password:new t.MJ("",[t.k0.required]),tenantName:new t.MJ("sims",[t.k0.required])}),this.options={showURL:!1,showToolbar:!1,clearCache:!0,clearSessionCache:!0,mediaPlaybackRequiresUserAction:!0,closeButtonText:"Close",toolbarPosition:0,showNavigationButtons:!0,leftToRight:!0,android:{hardwareBack:!1,allowZoom:!1,pauseMedia:!1},iOS:{allowOverScroll:!1,enableViewportScale:!1,allowInLineMediaPlayback:!1,surpressIncrementalRendering:!1,viewStyle:u.GC.PAGE_SHEET,animationEffect:u.E9.FLIP_HORIZONTAL}}}allowOnlyNumbers(n){const i=n.key.charCodeAt(0);(i<48||i>57)&&n.preventDefault()}ngOnInit(){this.storage.get("user").then(n=>{const i=JSON.parse(n);null!=i&&this.loginForm.setValue({userName:i.UserName,phoneNumber:i.PhoneNumber,password:i.pswd,tenantName:i.TenantShortName})}),this.loginForm.get("userName").valueChanges.subscribe(()=>this.updateFieldStates()),this.loginForm.get("phoneNumber").valueChanges.subscribe(()=>this.updateFieldStates()),this.updateFieldStates()}updateFieldStates(){const n=this.loginForm.get("userName").value?.trim(),i=this.loginForm.get("phoneNumber").value?.trim();this.loginForm.get("tenantName"),this.tenants=[],n&&i?10==i.length&&(this.isloading=!0,this.getTenantNames(n,i),this.loginForm.get("password").enable({emitEvent:!1}),this.loginForm.get("tenantName").enable({emitEvent:!1})):(console.log("Disabling phoneNumber and tenantName fields"),this.loginForm.get("password").disable({emitEvent:!1}),this.loginForm.get("tenantName").disable({emitEvent:!1}))}navigateToRegForm(){this.platform.ready().then(()=>{this.platform.ready().then(()=>{u.Nb.openInWebView({url:"https://excelsis360.com/nns/ContactForm/StudentRegistration?tenantName=nns",options:this.options}).then(i=>{}).catch(i=>{console.error(i)})})})}getTenantNames(n,i){this.commonService.presentToast("Please Wait Fetching Tenants...",5e3,"warning");const o=(new h.Nl).set("userName",n).set("phoneNumber",i);this.apiCall.login(l.h.urls.GetTenantNames,o).subscribe({next:m=>{if(m&&m.length>0){var d=m.split(",");for(let P=0;P<d.length;P++)this.tenants.push({id:P+1,name:d[P].split("##")[1],db:d[P].split("##")[0],logoPath:d[P].split("##")[2]});this.isloading=!1;const N=this.loginForm.get("tenantName").value;null!=N&&this.onTenantChange({detail:{value:N}})}else this.commonService.presentToast("No Tenant Records Found!",4e3,"danger")},error:m=>{console.error(m)}}),this.isloading=!1}logForm(){let n=new h.Nl;const i=this.loginForm.get("userName").value,o=this.loginForm.get("password").value,m=this.loginForm.get("tenantName").value;i&&o&&m&&(n=n.append("userName",i),n=n.append("password",o),n=n.append("tenantName",m)),this.loginForm.valid?this.apiCall.login(l.h.urls.login,n).subscribe({next:d=>{d.UserId<="0"?this.commonService.presentToast("Incorrect User Name & Password",3e3,"danger"):(d.pswd=this.loginForm.get("password").value,this.storage.set("user",JSON.stringify(d)),this.router.navigate(["/home"]))},error:d=>{this.commonService.presentToast("Please enter valid username and password",3e3,"danger")}}):this.commonService.presentToast("Please fill all mandatory fields(red star) and provide valid data",3e3,"danger")}onTenantChange(n){const i=n.detail.value,o=this.tenants.find(m=>m.db===i);o&&(this.loginImage="https://excelsis360.com/Content/Logos/"+o.logoPath)}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(T.h),e.rXU(S.J),e.rXU(p.Ix),e.rXU(b.w),e.rXU(v.OD))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-login"]],standalone:!1,decls:45,vars:8,consts:[[2,"width","75%","margin","auto","margin-top","1.5em",3,"src"],[3,"ngSubmit","formGroup"],["size","12"],["position","stacked",1,"vo-form-label"],["color","danger"],[1,"widget-card-login-box"],["formControlName","userName","type","text"],[4,"ngIf"],["formControlName","phoneNumber","type","text","maxlength","10",3,"keypress"],["formControlName","tenantName","placeholder","Select Tenant / Institute",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","password","type","password"],["expand","full","type","submit",2,"margin","10px"],["slot","start","name","log-in-outline"],[3,"value"]],template:function(i,o){1&i&&(e.j41(0,"ion-content"),e.nrm(1,"ion-img",0),e.j41(2,"ion-card")(3,"form",1),e.bIt("ngSubmit",function(){return o.logForm()}),e.j41(4,"ion-row")(5,"ion-col",2)(6,"ion-label",3),e.EFF(7,"User Name "),e.j41(8,"ion-text",4),e.EFF(9,"*"),e.k0s()()()(),e.j41(10,"ion-card",5),e.nrm(11,"ion-input",6),e.k0s(),e.DNE(12,w,2,1,"ion-row",7),e.j41(13,"ion-row")(14,"ion-col",2)(15,"ion-label",3),e.EFF(16,"Phone Number "),e.j41(17,"ion-text",4),e.EFF(18,"*"),e.k0s()()()(),e.j41(19,"ion-card",5)(20,"ion-input",8),e.bIt("keypress",function(d){return o.allowOnlyNumbers(d)}),e.k0s()(),e.DNE(21,L,2,1,"ion-row",7),e.j41(22,"ion-row")(23,"ion-col",2)(24,"ion-label",3),e.EFF(25,"Tenant / Institute "),e.DNE(26,E,5,0,"span",7),e.j41(27,"ion-text",4),e.EFF(28,"*"),e.k0s()()()(),e.j41(29,"ion-card",5)(30,"ion-select",9),e.bIt("ionChange",function(d){return o.onTenantChange(d)}),e.DNE(31,A,2,2,"ion-select-option",10),e.k0s()(),e.DNE(32,I,2,1,"ion-row",7),e.j41(33,"ion-row")(34,"ion-col",2)(35,"ion-label",3),e.EFF(36,"Password "),e.j41(37,"ion-text",4),e.EFF(38,"*"),e.k0s()()()(),e.j41(39,"ion-card",5),e.nrm(40,"ion-input",11),e.k0s(),e.DNE(41,j,2,1,"ion-row",7),e.j41(42,"ion-button",12),e.nrm(43,"ion-icon",13),e.EFF(44," Login "),e.k0s()()()()),2&i&&(e.R7$(),e.Y8G("src",o.loginImage),e.R7$(2),e.Y8G("formGroup",o.loginForm),e.R7$(9),e.Y8G("ngIf",o.loginForm.controls.userName.dirty&&o.loginForm.controls.userName.invalid),e.R7$(9),e.Y8G("ngIf",o.loginForm.controls.phoneNumber.dirty&&o.loginForm.controls.phoneNumber.invalid),e.R7$(5),e.Y8G("ngIf",1==o.isloading),e.R7$(5),e.Y8G("ngForOf",o.tenants),e.R7$(),e.Y8G("ngIf",o.loginForm.controls.tenantName.dirty&&o.loginForm.controls.tenantName.invalid),e.R7$(9),e.Y8G("ngIf",o.loginForm.controls.password.dirty&&o.loginForm.controls.password.invalid))},dependencies:[c.Sq,c.bT,t.qT,t.BC,t.cb,t.tU,r.Jm,r.b_,r.hU,r.W9,r.iq,r.KW,r.$w,r.he,r.ln,r.Nm,r.Ip,r.IO,r.Je,r.Gw,t.j4,t.JD],styles:[".widget-card-login-box[_ngcontent-%COMP%]{background:#fff;box-shadow:none;border:1px solid var(--ion-color-primary);color:#000}.poweredBy[_ngcontent-%COMP%]{text-align:center;color:#789;margin-top:3em}"]})}}return a})()}];let R=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[p.iI.forChild(x),p.iI]})}}return a})(),O=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[c.MD,t.YN,r.bv,t.X1,R]})}}return a})()},1840:(F,f,s)=>{s.d(f,{h:()=>t});class t{static{this.mainPath="https://excelsis360.com/ExcelsisMobileAPI/"}static{this.urls={login:t.mainPath+"Login",circularList:t.mainPath+"GetCirculars",homeWorkList:t.mainPath+"GetStudentCoursePlanDetails",GetReportCard:t.mainPath+"GetStudentProgressReport",GetTenantNames:t.mainPath+"GetTenantsList",GetUserFeeDetails:t.mainPath+"GetUserFeeDetails",GetNotifications:t.mainPath+"GetNotifications",GetSyllabas:t.mainPath+"GetChapterTopicsByUserId",GetFeedbackList:t.mainPath+"GetFeedbackList",GetMeetingsList:t.mainPath+"GetMeetingsList",MeetingHostJoined:t.mainPath+"MeetingHostJoined",MeetingEnd:t.mainPath+"EndMeeting",getGropusList:t.mainPath+"GetGroupDropDowns",getStudentList:t.mainPath+"",startMeeting:t.mainPath+"JoinMeeting",sendGroupMail:t.mainPath+"SendGroupMail",GetStudentTodayAttendanceDetails:t.mainPath+"GetStudentTodayAttendanceDetails",GetStudentCurrentMonthAttendanceDetails:t.mainPath+"GetStudentCurrentMonthAttendanceDetails",GetStudentLastThreeMonthsAttendanceDetails:t.mainPath+"GetStudentLastThreeMonthsAttendanceDetails",GetCalendarEvents:t.mainPath+"GetCalendarEvents",GetStudentTermAttendanceDetails:t.mainPath+"GetStudentTermAttendanceDetails",SaveFeedback:t.mainPath+"SaveFeedback",AddFeedback:t.mainPath+"AddFeedback",GetFeedbackTypes:t.mainPath+"GetFeedbackTypes",GetFeedbackCategoriesByType:t.mainPath+"GetFeedbackCategoriesByType",GetFeedbackStepsByTypeCategory:t.mainPath+"GetFeedbackStepsByTypeCategory",GetGalleryList:t.mainPath+"GetUserDMS",GetAllNodes:t.mainPath+"getAllNodes",AddUserDMSFolder:t.mainPath+"AddUserDMSFolder",UpdateDMSFileName:t.mainPath+"UpdateDMSFileName",AddUserDMSFile:t.mainPath+"AddUserDMSFile",DeleteNode:t.mainPath+"DeleteNode",GetDMSPermissionList:t.mainPath+"GetDMSPermissionList",UpdateDMSPermissions:t.mainPath+"UpdateDMSPermissions",SiteLinks:t.mainPath+"GetSiteLinks",GetAttendanceSubjects:t.mainPath+"GetAttendanceSubjects",GetAttendanceAcademicYears:t.mainPath+"GetAttendanceAcademicYears",GetAttendanceTerms:t.mainPath+"GetAttendanceTerms",GetAttendanceSection:t.mainPath+"GetAttendanceSection",GetAttendanceStudentsList:t.mainPath+"GetAttendanceStudentsList",SaveStudentsAttendance:t.mainPath+"SaveStudentsAttendance",GetPaymentOrderId:t.mainPath+"GetPaymentOrderId",GetTransactionDues:t.mainPath+"GetTransactionDues",GetTransactionsPaid:t.mainPath+"GetTransactionsPaid",ValidatePaymentCaptured:t.mainPath+"ValidatePaymentCaptured",DeleteCalendarEvent:t.mainPath+"DeleteCalendarEvent",AddCalendarEvents:t.mainPath+"AddCalendarEvents",GetCommunicatorTypes:t.mainPath+"GetCommunicatorTypes",GetFormsByType:t.mainPath+"GetFormsByType",SendCommunicator:t.mainPath+"SendCommunicator",GetStaffAttendanceRoles:t.mainPath+"GetStaffAttendanceRoles",GetStaffAttendance:t.mainPath+"GetStaffAttendance",SaveStaffAttendance:t.mainPath+"SaveStaffAttendance",GetUsersAsync:t.mainPath+"GetUsersAsync",GetDynamicDashboardsList:t.mainPath+"GetDynamicDashboardsList",GetDynamicDashboardAsync:t.mainPath+"GetDynamicDashboardAsync",GetTrips:t.mainPath+"GetTrips",UpdateTripLocation:t.mainPath+"UpdateTripLocation",GetBusLocationByTripId:t.mainPath+"GetBusLocationByTripId",EndTrip:t.mainPath+"EndTrip",GetTripDropDowns:t.mainPath+"GetTripDropDowns",CreateTrip:t.mainPath+"CreateTrip",SaveGpsAttendance:t.mainPath+"SaveGpsAttendance",GetGpsAttendance:t.mainPath+"GetGpsAttendance",LogMobileFirebaseToken:t.mainPath+"LogMobileFirebaseToken"}}}},6886:(F,f,s)=>{s.d(f,{J:()=>r});var c=s(1626),t=s(4438);let r=(()=>{class p{constructor(l){this.http=l}getHeadres(){let l=new c.Lr;return l.append("Content-Type","application/json"),l}addItemToList(l,h){let u=new c.Lr;return u.append("Content-Type","application/json"),this.http.post(l,h,{headers:u})}login(l,h){return this.http.get(l,{params:h})}registerUser(l,h){return(new c.Lr).append("Content-Type","application/x-www-form-urlencoded"),this.http.post(l,h,{headers:this.getHeadres()})}getCirculerList(l){return this.http.get(l)}static{this.\u0275fac=function(h){return new(h||p)(t.KVO(c.Qq))}}static{this.\u0275prov=t.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}}return p})()}}]);