"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9277],{9277:(S,l,s)=>{s.r(l),s.d(l,{AttendenceDashbordPageModule:()=>R});var h=s(177),t=s(4341),d=s(3465),u=s(9522),G=s(1626),o=s(1840),e=s(4438),P=s(2571),F=s(369),f=s(6886),T=s(5493);function M(n,m){if(1&n&&(e.j41(0,"div")(1,"ion-card")(2,"ion-row")(3,"ion-col",10)(4,"h2")(5,"ion-text")(6,"b"),e.EFF(7),e.k0s()()()()(),e.j41(8,"ion-row")(9,"ion-col",10)(10,"h2"),e.EFF(11),e.k0s()()(),e.j41(12,"ion-row")(13,"ion-col",10)(14,"h2"),e.EFF(15),e.k0s()()(),e.j41(16,"ion-row")(17,"ion-col",10)(18,"h2"),e.EFF(19),e.k0s()()()()()),2&n){const a=m.$implicit;e.R7$(7),e.JRh(a.Subject?a.Subject:"NA"),e.R7$(4),e.SpI("Working days\xa0\xa0\xa0: \xa0\xa0",null!=a.WorkingDays?a.WorkingDays:"NA",""),e.R7$(4),e.SpI("Present days\xa0\xa0\xa0: \xa0\xa0",null!=a.PresentDays?a.PresentDays:"NA",""),e.R7$(4),e.SpI("Absent days\xa0\xa0\xa0\xa0\xa0: \xa0\xa0",null!=a.AbsentDays?a.AbsentDays:"NA","")}}function b(n,m){if(1&n&&(e.j41(0,"ion-card-content"),e.DNE(1,M,20,4,"div",9),e.k0s()),2&n){const a=e.XpG();e.R7$(),e.Y8G("ngForOf",a.currentMonthData)}}function I(n,m){if(1&n&&(e.j41(0,"ion-card")(1,"ion-row")(2,"ion-col",10)(3,"h2")(4,"ion-text")(5,"b"),e.EFF(6),e.k0s()()()()(),e.j41(7,"ion-row")(8,"ion-col",10)(9,"h2"),e.EFF(10),e.k0s()()(),e.j41(11,"ion-row")(12,"ion-col",10)(13,"h2"),e.EFF(14),e.k0s()()(),e.j41(15,"ion-row")(16,"ion-col",10)(17,"h2"),e.EFF(18),e.k0s()()()()),2&n){const a=m.$implicit;e.R7$(6),e.JRh(a.Subject?a.Subject:"NA"),e.R7$(4),e.SpI("Working days\xa0\xa0\xa0: \xa0\xa0",null!=a.WorkingDays?a.WorkingDays:"NA",""),e.R7$(4),e.SpI("Present days\xa0\xa0\xa0: \xa0\xa0",null!=a.PresentDays?a.PresentDays:"NA",""),e.R7$(4),e.SpI("Absent days\xa0\xa0\xa0\xa0\xa0: \xa0\xa0",null!=a.AbsentDays?a.AbsentDays:"NA","")}}function v(n,m){if(1&n&&(e.j41(0,"div")(1,"ion-label")(2,"b"),e.EFF(3),e.k0s()(),e.DNE(4,I,19,4,"ion-card",9),e.k0s()),2&n){const a=m.$implicit;e.R7$(3),e.Lme("",a.Month.split(" ")[1]," ",a.Month.split(" ")[2],""),e.R7$(),e.Y8G("ngForOf",a.Records)}}function k(n,m){if(1&n&&(e.j41(0,"div")(1,"ion-card",11)(2,"ion-row")(3,"ion-col",10)(4,"h2")(5,"ion-text")(6,"b"),e.EFF(7),e.k0s()()()()(),e.j41(8,"ion-row")(9,"ion-col",10)(10,"h2"),e.EFF(11),e.k0s()()(),e.j41(12,"ion-row")(13,"ion-col",10)(14,"h2"),e.EFF(15),e.k0s()()(),e.j41(16,"ion-row")(17,"ion-col",10)(18,"h2"),e.EFF(19),e.k0s()()()()()),2&n){const a=m.$implicit;e.R7$(7),e.JRh(a.Subject?a.Subject:"NA"),e.R7$(4),e.SpI("Working days\xa0\xa0\xa0: \xa0\xa0",null!=a.WorkingDays?a.WorkingDays:"NA",""),e.R7$(4),e.SpI("Present days\xa0\xa0\xa0: \xa0\xa0",null!=a.PresentDays?a.PresentDays:"NA",""),e.R7$(4),e.SpI("Absent days\xa0\xa0\xa0\xa0\xa0: \xa0\xa0",null!=a.AbsentDays?a.AbsentDays:"NA","")}}const E=[{path:"",component:(()=>{class n{constructor(a,r,i,c){this.commonService=a,this.router=r,this.storage=i,this.apiCall=c,this.heading="Attendances",this.isBackRequired=!0,this.currentMonthData={},this.lastThreeMonthsData=[],this.termWiseAttendance=[],this.isAPiCallInProcess=!1,this.isErrorInApiCall=!1,this.groupBy=g=>y=>y.reduce((p,A)=>{const D=A[g];return p[D]=(p[D]||[]).concat(A),p},{})}ngOnInit(){this.getCurrentMonthAttendance(),this.getLastthreeMonthsMonthAttendance(),this.getTermWiseMonthAttendance()}gotoAttendanceList(){this.router.navigate(["/attendence-list"])}getCurrentMonthAttendance(){this.storage.get("user").then(a=>{const r=JSON.parse(a);let i=new G.Nl;i=i.append("UserID",r.UserId),i=i.append("tenantName",r.TenantShortName),this.isAPiCallInProcess=!0,this.apiCall.login(o.h.urls.GetStudentCurrentMonthAttendanceDetails,i).subscribe(c=>{this.isAPiCallInProcess=!1,this.isErrorInApiCall=!1,this.currentMonthData=c},c=>{this.isErrorInApiCall=!0,this.isAPiCallInProcess=!1})})}getLastthreeMonthsMonthAttendance(){this.storage.get("user").then(a=>{const r=JSON.parse(a);let i=new G.Nl;i=i.append("UserID",r.UserId),i=i.append("tenantName",r.TenantShortName),this.isAPiCallInProcess=!0,this.apiCall.login(o.h.urls.GetStudentLastThreeMonthsAttendanceDetails,i).subscribe({next:c=>{this.isAPiCallInProcess=!1,this.isErrorInApiCall=!1;const g=this.groupBy("FromDate");let y=c.map(A=>A.FromDate).filter((A,D,j)=>j.indexOf(A)===D),p=[];y.forEach(function(A){p.push({Month:A,Records:g(c)[""+A]})}),this.lastThreeMonthsData=p},error:c=>{this.isErrorInApiCall=!0,this.isAPiCallInProcess=!1}})})}tryAgain(){this.getCurrentMonthAttendance()}getTermWiseMonthAttendance(){this.storage.get("user").then(a=>{const r=JSON.parse(a);let i=new G.Nl;i=i.append("UserID",r.UserId),i=i.append("tenantName",r.TenantShortName),this.isAPiCallInProcess=!0,this.apiCall.login(o.h.urls.GetStudentTermAttendanceDetails,i).subscribe(c=>{this.isAPiCallInProcess=!1,this.isErrorInApiCall=!1,this.termWiseAttendance=c},c=>{this.isErrorInApiCall=!0,this.isAPiCallInProcess=!1})})}static{this.\u0275fac=function(r){return new(r||n)(e.rXU(P.h),e.rXU(u.Ix),e.rXU(F.w),e.rXU(f.J))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-attendence-dashbord"]],standalone:!1,decls:26,vars:5,consts:[[3,"title","isBackRequired"],["color","secondary","no-padding","",1,"service-head"],[3,"click"],["size","10"],["size","2"],["name","eye-outline",2,"zoom","2.0","margin-top","6px"],[2,"border-bottom","1px solid white"],[4,"ngIf"],["color","danger","no-padding","",1,"service-head"],[4,"ngFor","ngForOf"],["size","12"],[1,"widget-card-shadow"]],template:function(r,i){1&r&&(e.nrm(0,"app-header-toolbar",0),e.j41(1,"ion-content")(2,"ion-card",1)(3,"ion-row",2),e.bIt("click",function(){return i.gotoAttendanceList()}),e.j41(4,"ion-col",3)(5,"h5"),e.EFF(6,"Today Attendance"),e.k0s()(),e.j41(7,"ion-col",4),e.nrm(8,"ion-icon",5),e.k0s()()(),e.j41(9,"ion-card",1)(10,"ion-card-header",6)(11,"ion-card-title"),e.EFF(12," Current Month Attendance "),e.k0s()(),e.DNE(13,b,2,1,"ion-card-content",7),e.k0s(),e.j41(14,"ion-card",8)(15,"ion-card-header",6)(16,"ion-card-title"),e.EFF(17," Last 3 Months Attendance "),e.k0s()(),e.j41(18,"ion-card-content"),e.DNE(19,v,5,3,"div",9),e.k0s()(),e.j41(20,"ion-card",8)(21,"ion-card-header",6)(22,"ion-card-title"),e.EFF(23," Term Wise Attendance "),e.k0s()(),e.j41(24,"ion-card-content"),e.DNE(25,k,20,4,"div",9),e.k0s()()()),2&r&&(e.Y8G("title",i.heading)("isBackRequired",i.isBackRequired),e.R7$(13),e.Y8G("ngIf",i.currentMonthData&&i.currentMonthData.length>0),e.R7$(6),e.Y8G("ngForOf",i.lastThreeMonthsData),e.R7$(6),e.Y8G("ngForOf",i.termWiseAttendance))},dependencies:[h.Sq,h.bT,d.b_,d.I9,d.ME,d.tN,d.hU,d.W9,d.iq,d.he,d.ln,d.IO,T.M],encapsulation:2})}}return n})()}];let L=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[u.iI.forChild(E),u.iI]})}}return n})();var N=s(5075);let R=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[h.MD,t.YN,d.bv,L,N.HomePageModule]})}}return n})()},1840:(S,l,s)=>{s.d(l,{h:()=>t});class t{static{this.mainPath="https://excelsis360.com/ExcelsisMobileAPI/"}static{this.urls={login:t.mainPath+"Login",circularList:t.mainPath+"GetCirculars",homeWorkList:t.mainPath+"GetStudentCoursePlanDetails",GetReportCard:t.mainPath+"GetStudentProgressReport",GetTenantNames:t.mainPath+"GetTenantsList",GetUserFeeDetails:t.mainPath+"GetUserFeeDetails",GetNotifications:t.mainPath+"GetNotifications",GetSyllabas:t.mainPath+"GetChapterTopicsByUserId",GetFeedbackList:t.mainPath+"GetFeedbackList",GetMeetingsList:t.mainPath+"GetMeetingsList",MeetingHostJoined:t.mainPath+"MeetingHostJoined",MeetingEnd:t.mainPath+"EndMeeting",getGropusList:t.mainPath+"GetGroupDropDowns",getStudentList:t.mainPath+"",startMeeting:t.mainPath+"JoinMeeting",sendGroupMail:t.mainPath+"SendGroupMail",GetStudentTodayAttendanceDetails:t.mainPath+"GetStudentTodayAttendanceDetails",GetStudentCurrentMonthAttendanceDetails:t.mainPath+"GetStudentCurrentMonthAttendanceDetails",GetStudentLastThreeMonthsAttendanceDetails:t.mainPath+"GetStudentLastThreeMonthsAttendanceDetails",GetCalendarEvents:t.mainPath+"GetCalendarEvents",GetStudentTermAttendanceDetails:t.mainPath+"GetStudentTermAttendanceDetails",SaveFeedback:t.mainPath+"SaveFeedback",AddFeedback:t.mainPath+"AddFeedback",GetFeedbackTypes:t.mainPath+"GetFeedbackTypes",GetFeedbackCategoriesByType:t.mainPath+"GetFeedbackCategoriesByType",GetFeedbackStepsByTypeCategory:t.mainPath+"GetFeedbackStepsByTypeCategory",GetGalleryList:t.mainPath+"GetUserDMS",GetAllNodes:t.mainPath+"getAllNodes",AddUserDMSFolder:t.mainPath+"AddUserDMSFolder",UpdateDMSFileName:t.mainPath+"UpdateDMSFileName",AddUserDMSFile:t.mainPath+"AddUserDMSFile",DeleteNode:t.mainPath+"DeleteNode",GetDMSPermissionList:t.mainPath+"GetDMSPermissionList",UpdateDMSPermissions:t.mainPath+"UpdateDMSPermissions",SiteLinks:t.mainPath+"GetSiteLinks",GetAttendanceSubjects:t.mainPath+"GetAttendanceSubjects",GetAttendanceAcademicYears:t.mainPath+"GetAttendanceAcademicYears",GetAttendanceTerms:t.mainPath+"GetAttendanceTerms",GetAttendanceSection:t.mainPath+"GetAttendanceSection",GetAttendanceStudentsList:t.mainPath+"GetAttendanceStudentsList",SaveStudentsAttendance:t.mainPath+"SaveStudentsAttendance",GetPaymentOrderId:t.mainPath+"GetPaymentOrderId",GetTransactionDues:t.mainPath+"GetTransactionDues",GetTransactionsPaid:t.mainPath+"GetTransactionsPaid",ValidatePaymentCaptured:t.mainPath+"ValidatePaymentCaptured",DeleteCalendarEvent:t.mainPath+"DeleteCalendarEvent",AddCalendarEvents:t.mainPath+"AddCalendarEvents",GetCommunicatorTypes:t.mainPath+"GetCommunicatorTypes",GetFormsByType:t.mainPath+"GetFormsByType",SendCommunicator:t.mainPath+"SendCommunicator",GetStaffAttendanceRoles:t.mainPath+"GetStaffAttendanceRoles",GetStaffAttendance:t.mainPath+"GetStaffAttendance",SaveStaffAttendance:t.mainPath+"SaveStaffAttendance",GetUsersAsync:t.mainPath+"GetUsersAsync",GetDynamicDashboardsList:t.mainPath+"GetDynamicDashboardsList",GetDynamicDashboardAsync:t.mainPath+"GetDynamicDashboardAsync",GetTrips:t.mainPath+"GetTrips",UpdateTripLocation:t.mainPath+"UpdateTripLocation",GetBusLocationByTripId:t.mainPath+"GetBusLocationByTripId",EndTrip:t.mainPath+"EndTrip",GetTripDropDowns:t.mainPath+"GetTripDropDowns",CreateTrip:t.mainPath+"CreateTrip",SaveGpsAttendance:t.mainPath+"SaveGpsAttendance",GetGpsAttendance:t.mainPath+"GetGpsAttendance",LogMobileFirebaseToken:t.mainPath+"LogMobileFirebaseToken"}}}},6886:(S,l,s)=>{s.d(l,{J:()=>d});var h=s(1626),t=s(4438);let d=(()=>{class u{constructor(o){this.http=o}getHeadres(){let o=new h.Lr;return o.append("Content-Type","application/json"),o}addItemToList(o,e){let P=new h.Lr;return P.append("Content-Type","application/json"),this.http.post(o,e,{headers:P})}login(o,e){return this.http.get(o,{params:e})}registerUser(o,e){return(new h.Lr).append("Content-Type","application/x-www-form-urlencoded"),this.http.post(o,e,{headers:this.getHeadres()})}getCirculerList(o){return this.http.get(o)}static{this.\u0275fac=function(e){return new(e||u)(t.KVO(h.Qq))}}static{this.\u0275prov=t.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})()}}]);