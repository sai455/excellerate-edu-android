"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9565],{9565:(O,g,a)=>{a.r(g),a.d(g,{TimetablePageModule:()=>$});var d=a(177),m=a(4341),r=a(3465),h=a(9522),p=a(467),v=a(3125),u=a(1626),f=a(1840),T=a(4808),e=a(4438),C=a(2571),I=a(369),E=a(6886),_=a(5493);const P=()=>({day:"2-digit",month:"short",year:"numeric"}),F=i=>({date:i}),D=()=>[0,1,2,3,4,5,6,7,8,9,10];function y(i,c){1&i&&(e.j41(0,"ion-card")(1,"ion-row")(2,"ion-col",5),e.nrm(3,"ion-skeleton-text",6),e.k0s()(),e.j41(4,"ion-row")(5,"ion-col",5),e.nrm(6,"ion-skeleton-text",6),e.k0s()()())}function b(i,c){1&i&&(e.j41(0,"div")(1,"div"),e.EFF(2,"Loading Events....."),e.k0s(),e.j41(3,"ion-list"),e.DNE(4,y,7,0,"ion-card",4),e.k0s()()),2&i&&(e.R7$(4),e.Y8G("ngForOf",e.lJ4(1,D)))}function M(i,c){if(1&i){const t=e.RV6();e.j41(0,"div",7),e.EFF(1,"Somthing went wrong "),e.j41(2,"a",8),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.tryAgain())}),e.EFF(3," Try again"),e.k0s()()}}function R(i,c){1&i&&(e.j41(0,"div",12),e.EFF(1," No events found "),e.k0s())}function j(i,c){if(1&i){const t=e.RV6();e.j41(0,"ion-row")(1,"ion-col",5)(2,"ion-button",14),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG(2);return e.Njj(o.presentModal(n,n.EventId))}),e.EFF(3," Edit "),e.k0s(),e.j41(4,"ion-button",15),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2).$implicit,o=e.XpG(2);return e.Njj(o.presentAlertConfirm(n))}),e.EFF(5," Delete "),e.k0s()()()}}function A(i,c){if(1&i&&(e.j41(0,"div")(1,"ion-row")(2,"ion-col",5)(3,"b"),e.EFF(4),e.k0s()()(),e.j41(5,"ion-row")(6,"ion-col",5),e.EFF(7," From: "),e.j41(8,"b"),e.EFF(9),e.k0s()()(),e.j41(10,"ion-row")(11,"ion-col",5),e.EFF(12," To: "),e.j41(13,"b"),e.EFF(14),e.k0s()()(),e.j41(15,"ion-row")(16,"ion-col",5)(17,"b"),e.EFF(18),e.k0s()()(),e.DNE(19,j,6,0,"ion-row",2),e.k0s()),2&i){const t=e.XpG().$implicit,s=e.XpG(2);e.R7$(4),e.JRh(t.FollowUpTitle),e.R7$(5),e.JRh(t.StartTime),e.R7$(5),e.JRh(t.EndTime),e.R7$(4),e.JRh(t.FollowUpEventNote),e.R7$(),e.Y8G("ngIf",t.CreatedBy==s.userDetails.UserId)}}function k(i,c){if(1&i&&(e.j41(0,"ion-card",13),e.DNE(1,A,20,5,"div",2),e.k0s()),2&i){const t=c.$implicit;e.R7$(),e.Y8G("ngIf",0==t.MeetingInfo.Id)}}function G(i,c){if(1&i&&(e.j41(0,"ion-list")(1,"ion-list-header",9)(2,"h4"),e.EFF(3),e.nI1(4,"date"),e.k0s()(),e.DNE(5,R,2,0,"div",10)(6,k,2,1,"ion-card",11),e.k0s()),2&i){const t=e.XpG();e.R7$(3),e.SpI("Time Table ( ",e.i5U(4,3,t.selecetedDate,"dd-MMM-yyyy")," )"),e.R7$(2),e.Y8G("ngIf",t.selectedDateEvent&&0==t.selectedDateEvent.length&&!t.isAPiCallInProcess),e.R7$(),e.Y8G("ngForOf",t.selectedDateEvent)}}const N=[{path:"",component:(()=>{class i{constructor(t,s,n,o,l,X,J){this.commonService=t,this.router=s,this.storage=n,this.apiCall=o,this.modalController=l,this.datePipe=X,this.alertController=J,this.ticketilImage=v.l.appImages.ticketsIl,this.heading="Time Table",this.isBackRequired=!0,this.isAPiCallInProcess=!1,this.isErrorInApiCall=!1,this.selecetedDate=(new Date).toISOString()}ngOnInit(){this.getCalenderEvent()}gotoJoinMeeting(t){this.commonService.setSelectedMeeting(t),this.router.navigate(["/meetingroom/0"])}onEventSearch(t){let s=t.target.value;this.selectedDateEvent=0==s.length?this.mainList:this.mainList.filter(n=>n.FollowUpTitle.toLocaleLowerCase().includes(s.toLocaleLowerCase())||(n.MeetingInfo.Title??"").toLocaleLowerCase().includes(s.toLocaleLowerCase()))}deleteEvent(t){this.storage.get("user").then(s=>{const n=JSON.parse(s);let o=new u.Nl;o=o.append("userID",n.UserId),o=o.append("tenantName",n.TenantShortName),o=o.append("eventId",t.EventId),this.isAPiCallInProcess=!0,this.apiCall.login(f.h.urls.DeleteCalendarEvent,o).subscribe({next:l=>{this.isAPiCallInProcess=!1,this.isErrorInApiCall=!1,this.commonService.presentToast("Record removed successfully",3e3,"success"),this.getCalenderEvent()},error:l=>{this.isErrorInApiCall=!0,this.isAPiCallInProcess=!1,console.log("erorrrrrrrrrrrrrrr")}})})}presentAlertConfirm(t){var s=this;return(0,p.A)(function*(){yield(yield s.alertController.create({cssClass:"my-custom-class",header:"Confirm!",backdropDismiss:!1,message:"<strong>Are you sure you wish to delete ?</strong>",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:o=>{}},{text:"Okay",handler:()=>{s.deleteEvent(t)}}]})).present()})()}getCalenderEvent(){this.storage.get("user").then(t=>{const s=JSON.parse(t);this.userDetails=s;let n=new u.Nl;n=n.append("UserID",s.UserId),n=n.append("tenantName",s.TenantShortName),n=n.append("date",this.datePipe.transform(this.selecetedDate,"yyyy/MM/dd")||""),this.isAPiCallInProcess=!0,this.apiCall.login(f.h.urls.GetCalendarEvents,n).subscribe({next:o=>{this.isAPiCallInProcess=!1,this.isErrorInApiCall=!1,this.list=o,this.selectedDateEvent=this.list.filter(l=>1==l.IsTimeTableEvent)},error:o=>{this.isErrorInApiCall=!0,this.isAPiCallInProcess=!1,console.log("erorrrrrrrrrrrrrrr")}})})}tryAgain(){this.getCalenderEvent()}onCurrentDateChanged(){this.getCalenderEvent()}eventGorupBy(t,s){return t.reduce((n,o)=>((n[o[s]]=n[o[s]]||[]).push(o),n),{})}presentModal(t,s){var n=this;return(0,p.A)(function*(){0==s&&((t={}).FollowUpTitle="",t.FollowUpEventNote="",t.EndTime="02/06/2022 12:45:00",t.StartTime="02/06/2022 12:45:00");const o=yield n.modalController.create({component:T.Q,showBackdrop:!0,backdropDismiss:!1,cssClass:"my-fullform-modal-css",componentProps:{modalTitle:0==s?"ADD NEW":"EDIT "+t.FollowUpTitle,eventInfo:t,tenantShortName:n.userDetails.TenantShortName}});return o.onDidDismiss().then(l=>{null!==l.data&&n.getCalenderEvent()}),yield o.present()})()}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(C.h),e.rXU(h.Ix),e.rXU(I.w),e.rXU(E.J),e.rXU(r.W3),e.rXU(d.vh),e.rXU(r.hG))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-timetable"]],standalone:!1,features:[e.Jv_([d.vh])],decls:7,vars:11,consts:[[3,"title","isBackRequired"],["size","12","presentation","date","min","2025-01-01T00:00:00","max","2035-12-31T23:59:59",3,"ngModelChange","ngModel","showDefaultTitle","formatOptions"],[4,"ngIf"],["class","somthingWrong",4,"ngIf"],[4,"ngFor","ngForOf"],["size","12"],["animated","",2,"width","50%"],[1,"somthingWrong"],[3,"click"],["color","primary"],["class","no-event-found",4,"ngIf"],["class","lits-item--card",4,"ngFor","ngForOf"],[1,"no-event-found"],[1,"lits-item--card"],["color","light","size","small",3,"click"],["color","danger","size","small",3,"click"]],template:function(s,n){1&s&&(e.nrm(0,"app-header-toolbar",0),e.j41(1,"ion-content")(2,"ion-row")(3,"ion-datetime",1),e.bIt("ngModelChange",function(){return n.onCurrentDateChanged()}),e.mxI("ngModelChange",function(l){return e.DH7(n.selecetedDate,l)||(n.selecetedDate=l),l}),e.k0s()(),e.DNE(4,b,5,2,"div",2)(5,M,4,0,"div",3)(6,G,7,6,"ion-list",2),e.k0s()),2&s&&(e.Y8G("title",n.heading)("isBackRequired",n.isBackRequired),e.R7$(3),e.R50("ngModel",n.selecetedDate),e.Y8G("showDefaultTitle",!0)("formatOptions",e.eq3(9,F,e.lJ4(8,P))),e.R7$(),e.Y8G("ngIf",n.isAPiCallInProcess),e.R7$(),e.Y8G("ngIf",n.isErrorInApiCall),e.R7$(),e.Y8G("ngIf",!n.isAPiCallInProcess))},dependencies:[d.Sq,d.bT,m.BC,m.vS,r.Jm,r.b_,r.hU,r.W9,r.A9,r.nf,r.AF,r.ln,r.ds,r.Je,_.M,d.vh],styles:[".event-detail-container[_ngcontent-%COMP%]{display:none!important}.no-event-found[_ngcontent-%COMP%]{position:relative;left:30%;margin-top:21%}"]})}}return i})()}];let w=(()=>{class i{static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[h.iI.forChild(N),h.iI]})}}return i})();var U=a(5284),S=a(5075);let $=(()=>{class i{static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[d.MD,m.YN,r.bv,w,U.ML,S.HomePageModule]})}}return i})()}}]);