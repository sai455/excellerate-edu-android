"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5197],{1840:(T,F,n)=>{n.d(F,{h:()=>t});class t{static{this.mainPath="https://excelsis360.com/ExcelsisMobileAPI/"}static{this.urls={login:t.mainPath+"Login",circularList:t.mainPath+"GetCirculars",homeWorkList:t.mainPath+"GetStudentCoursePlanDetails",GetReportCard:t.mainPath+"GetStudentProgressReport",GetTenantNames:t.mainPath+"GetTenantsList",GetUserFeeDetails:t.mainPath+"GetUserFeeDetails",GetNotifications:t.mainPath+"GetNotifications",GetSyllabas:t.mainPath+"GetChapterTopicsByUserId",GetFeedbackList:t.mainPath+"GetFeedbackList",GetMeetingsList:t.mainPath+"GetMeetingsList",MeetingHostJoined:t.mainPath+"MeetingHostJoined",MeetingEnd:t.mainPath+"EndMeeting",getGropusList:t.mainPath+"GetGroupDropDowns",getStudentList:t.mainPath+"",startMeeting:t.mainPath+"JoinMeeting",sendGroupMail:t.mainPath+"SendGroupMail",GetStudentTodayAttendanceDetails:t.mainPath+"GetStudentTodayAttendanceDetails",GetStudentCurrentMonthAttendanceDetails:t.mainPath+"GetStudentCurrentMonthAttendanceDetails",GetStudentLastThreeMonthsAttendanceDetails:t.mainPath+"GetStudentLastThreeMonthsAttendanceDetails",GetCalendarEvents:t.mainPath+"GetCalendarEvents",GetStudentTermAttendanceDetails:t.mainPath+"GetStudentTermAttendanceDetails",SaveFeedback:t.mainPath+"SaveFeedback",AddFeedback:t.mainPath+"AddFeedback",GetFeedbackTypes:t.mainPath+"GetFeedbackTypes",GetFeedbackCategoriesByType:t.mainPath+"GetFeedbackCategoriesByType",GetFeedbackStepsByTypeCategory:t.mainPath+"GetFeedbackStepsByTypeCategory",GetGalleryList:t.mainPath+"GetUserDMS",GetAllNodes:t.mainPath+"getAllNodes",AddUserDMSFolder:t.mainPath+"AddUserDMSFolder",UpdateDMSFileName:t.mainPath+"UpdateDMSFileName",AddUserDMSFile:t.mainPath+"AddUserDMSFile",DeleteNode:t.mainPath+"DeleteNode",GetDMSPermissionList:t.mainPath+"GetDMSPermissionList",UpdateDMSPermissions:t.mainPath+"UpdateDMSPermissions",SiteLinks:t.mainPath+"GetSiteLinks",GetAttendanceSubjects:t.mainPath+"GetAttendanceSubjects",GetAttendanceAcademicYears:t.mainPath+"GetAttendanceAcademicYears",GetAttendanceTerms:t.mainPath+"GetAttendanceTerms",GetAttendanceSection:t.mainPath+"GetAttendanceSection",GetAttendanceStudentsList:t.mainPath+"GetAttendanceStudentsList",SaveStudentsAttendance:t.mainPath+"SaveStudentsAttendance",GetPaymentOrderId:t.mainPath+"GetPaymentOrderId",GetTransactionDues:t.mainPath+"GetTransactionDues",GetTransactionsPaid:t.mainPath+"GetTransactionsPaid",ValidatePaymentCaptured:t.mainPath+"ValidatePaymentCaptured",DeleteCalendarEvent:t.mainPath+"DeleteCalendarEvent",AddCalendarEvents:t.mainPath+"AddCalendarEvents",GetCommunicatorTypes:t.mainPath+"GetCommunicatorTypes",GetFormsByType:t.mainPath+"GetFormsByType",SendCommunicator:t.mainPath+"SendCommunicator",GetStaffAttendanceRoles:t.mainPath+"GetStaffAttendanceRoles",GetStaffAttendance:t.mainPath+"GetStaffAttendance",SaveStaffAttendance:t.mainPath+"SaveStaffAttendance",GetUsersAsync:t.mainPath+"GetUsersAsync",GetDynamicDashboardsList:t.mainPath+"GetDynamicDashboardsList",GetDynamicDashboardAsync:t.mainPath+"GetDynamicDashboardAsync",GetTrips:t.mainPath+"GetTrips",UpdateTripLocation:t.mainPath+"UpdateTripLocation",GetBusLocationByTripId:t.mainPath+"GetBusLocationByTripId",EndTrip:t.mainPath+"EndTrip",GetTripDropDowns:t.mainPath+"GetTripDropDowns",CreateTrip:t.mainPath+"CreateTrip",SaveGpsAttendance:t.mainPath+"SaveGpsAttendance",GetGpsAttendance:t.mainPath+"GetGpsAttendance",LogMobileFirebaseToken:t.mainPath+"LogMobileFirebaseToken"}}}},6886:(T,F,n)=>{n.d(F,{J:()=>c});var h=n(1626),t=n(4438);let c=(()=>{class g{constructor(l){this.http=l}getHeadres(){let l=new h.Lr;return l.append("Content-Type","application/json"),l}addItemToList(l,m){let e=new h.Lr;return e.append("Content-Type","application/json"),this.http.post(l,m,{headers:e})}login(l,m){return this.http.get(l,{params:m})}registerUser(l,m){return(new h.Lr).append("Content-Type","application/x-www-form-urlencoded"),this.http.post(l,m,{headers:this.getHeadres()})}getCirculerList(l){return this.http.get(l)}static{this.\u0275fac=function(m){return new(m||g)(t.KVO(h.Qq))}}static{this.\u0275prov=t.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}}return g})()},7578:(T,F,n)=>{n.r(F),n.d(F,{TicketCreationPageModule:()=>x});var h=n(177),t=n(4341),c=n(3465),g=n(9522),G=n(467),l=n(1840),m=n(1626),e=n(4438),k=n(369),f=n(6886),y=n(2571),M=n(5493);function D(i,s){if(1&i&&(e.j41(0,"ion-select-option",17),e.EFF(1),e.k0s()),2&i){const a=s.$implicit;e.Y8G("value",a.CodeId),e.R7$(),e.SpI(" ",a.CodeDesc," ")}}function S(i,s){1&i&&e.nrm(0,"ion-spinner",18)}function b(i,s){1&i&&(e.j41(0,"ion-col")(1,"ion-text",4),e.EFF(2," Please select Topic "),e.k0s()())}function v(i,s){if(1&i&&(e.j41(0,"ion-row"),e.DNE(1,b,3,0,"ion-col",10),e.k0s()),2&i){const a=e.XpG();e.R7$(),e.Y8G("ngIf",a.groupMailForm.controls.type.errors&&a.groupMailForm.controls.type.errors.required)}}function I(i,s){if(1&i&&(e.j41(0,"ion-select-option",17),e.EFF(1),e.k0s()),2&i){const a=s.$implicit;e.Y8G("value",a.CodeId),e.R7$(),e.JRh(a.CodeDesc)}}function E(i,s){1&i&&(e.j41(0,"ion-col")(1,"ion-text",4),e.EFF(2," Please selecet Activity "),e.k0s()())}function A(i,s){if(1&i&&(e.j41(0,"ion-row"),e.DNE(1,E,3,0,"ion-col",10),e.k0s()),2&i){const a=e.XpG();e.R7$(),e.Y8G("ngIf",a.groupMailForm.controls.cat.errors&&a.groupMailForm.controls.cat.errors.required)}}function N(i,s){if(1&i&&(e.j41(0,"ion-select-option",17),e.EFF(1),e.k0s()),2&i){const a=s.$implicit;e.Y8G("value",a.CodeId),e.R7$(),e.JRh(a.CodeDesc)}}function w(i,s){1&i&&(e.j41(0,"ion-col")(1,"ion-text",4),e.EFF(2," Please selecet step "),e.k0s()())}function j(i,s){if(1&i&&(e.j41(0,"ion-row"),e.DNE(1,w,3,0,"ion-col",10),e.k0s()),2&i){const a=e.XpG();e.R7$(),e.Y8G("ngIf",a.groupMailForm.controls.step.errors&&a.groupMailForm.controls.step.errors.required)}}function C(i,s){if(1&i&&(e.j41(0,"ion-select-option",17),e.EFF(1),e.k0s()),2&i){const a=s.$implicit;e.Y8G("value",a.value),e.R7$(),e.JRh(a.key)}}function L(i,s){1&i&&(e.j41(0,"ion-col")(1,"ion-text",4),e.EFF(2," Please selecet status "),e.k0s()())}function R(i,s){if(1&i&&(e.j41(0,"ion-row"),e.DNE(1,L,3,0,"ion-col",10),e.k0s()),2&i){const a=e.XpG();e.R7$(),e.Y8G("ngIf",a.groupMailForm.controls.status.errors&&a.groupMailForm.controls.status.errors.required)}}function $(i,s){1&i&&(e.j41(0,"ion-col")(1,"ion-text",4),e.EFF(2," Please enter Details "),e.k0s()())}function Y(i,s){if(1&i&&(e.j41(0,"ion-row"),e.DNE(1,$,3,0,"ion-col",10),e.k0s()),2&i){const a=e.XpG();e.R7$(),e.Y8G("ngIf",a.groupMailForm.controls.Feedback.errors&&a.groupMailForm.controls.Feedback.errors.required)}}function B(i,s){1&i&&(e.j41(0,"ion-col")(1,"ion-text",4),e.EFF(2," Please enter phone number "),e.k0s()())}function J(i,s){if(1&i&&(e.j41(0,"ion-row"),e.DNE(1,B,3,0,"ion-col",10),e.k0s()),2&i){const a=e.XpG();e.R7$(),e.Y8G("ngIf",a.groupMailForm.controls.phone.errors&&a.groupMailForm.controls.phone.errors.required)}}const O=[{path:"",component:(()=>{class i{constructor(a,r,o,d,p){this.router=a,this.storage=r,this.apiCall=o,this.commonService=d,this.loadingController=p,this.heading="New Feedback",this.isBackRequired=!0,this.ticketTypes=[],this.categories=[],this.steps=[],this.status=[{key:"New",value:1},{key:"Closed",value:0}],this.isEdit=!1,this.isAPiCallInProcess=!1,this.groupMailForm=new t.gE({type:new t.MJ("",[t.k0.required]),cat:new t.MJ("",[t.k0.required]),step:new t.MJ("",[t.k0.required]),status:new t.MJ("",[t.k0.required]),Feedback:new t.MJ("",[t.k0.required]),phone:new t.MJ("",[t.k0.required])})}ngOnInit(){const a=this.commonService.getEditedTicket();this.editTicketData=a,this.getTicketTypesList(),a&&(this.isAPiCallInProcess=!0,this.groupMailForm.get("step")?.setValue(a.StepId),this.groupMailForm.get("Feedback")?.setValue(a.Feedback),this.groupMailForm.get("phone")?.setValue(a.Mobile),this.groupMailForm.get("status")?.setValue(a.Status),this.isEdit=!0,this.heading="Edit Feedback",this.isAPiCallInProcess=!1)}submitTicket(){this.presentLoading(),this.storage.get("user").then(a=>{const r=JSON.parse(a);let o=new URLSearchParams;o.append("UserID",r.UserId),o.append("tenantName",r.TenantShortName),o.append("cat",this.groupMailForm.value.cat??""),o.append("type",this.groupMailForm.value.type??""),o.append("step",this.groupMailForm.value.step??""),o.append("status",this.groupMailForm.value.status??""),o.append("Feedback",this.groupMailForm.value.Feedback??""),o.append("phone",this.groupMailForm.value.phone??"");let d=o.toString(),p="";p=l.h.urls.SaveFeedback+"?UserId="+r.UserId+"&tenantName="+r.TenantShortName+"&Feedback="+this.groupMailForm.value.Feedback+"&phone="+this.groupMailForm.value.phone+"&cat="+this.groupMailForm.value.cat+"&type="+this.groupMailForm.value.type+"&step="+this.groupMailForm.value.step+"&status="+this.groupMailForm.value.status+"&feedbackId="+(this.isEdit?this.commonService.getEditedTicket().FeedbackId:0),this.apiCall.registerUser(p,d).subscribe(u=>{this.commonService.presentToast(this.isEdit?"Ticket details updated successfully":"Ticket request created successfully",3e3),this.loading.dismiss(),this.commonService.systemBack()},u=>{this.loading.dismiss(),this.commonService.presentToast("Internal problem, please try again",3e3,"danger")})})}presentLoading(){var a=this;return(0,G.A)(function*(){a.loading=yield a.loadingController.create({message:"Ticket request submitting ...."}),yield a.loading.present()})()}getTicketTypesList(){this.storage.get("user").then(a=>{const r=JSON.parse(a);let o=new m.Nl;o=o.append("tenantName",r.TenantShortName),this.apiCall.login(l.h.urls.GetFeedbackTypes,o).subscribe(d=>{this.ticketTypes=d,this.ticketTypes&&this.ticketTypes.length>0&&this.editTicketData&&this.editTicketData.TypeId&&this.groupMailForm.get("type")?.setValue(this.editTicketData.TypeId)},d=>{console.log("erorrrrrrrrrrrrrrr")})})}getCategoryListByType(a){this.groupMailForm.get("cat")?.setValue(""),this.groupMailForm.get("step")?.setValue(""),this.storage.get("user").then(r=>{const o=JSON.parse(r);let d=new m.Nl;d=d.append("TypeId",a),d=d.append("tenantName",o.TenantShortName),this.apiCall.login(l.h.urls.GetFeedbackCategoriesByType,d).subscribe({next:p=>{this.categories=p,this.categories&&this.categories.length>0&&this.editTicketData&&this.editTicketData.CategoryId&&this.groupMailForm.get("cat")?.setValue(this.editTicketData.CategoryId)},error:p=>{console.log("erorrrrrrrrrrrrrrr")}})})}getStepsListByTypeCat(a,r){this.groupMailForm.get("step")?.setValue(""),this.storage.get("user").then(o=>{const d=JSON.parse(o);let p=(this.editTicketData&&this.editTicketData.StepId)??0,u=new m.Nl;u=u.append("TypeId",a),u=u.append("CategoryId",r),u=u.append("tenantName",d.TenantShortName),u=u.append("CurrentStepId",p),this.apiCall.login(l.h.urls.GetFeedbackStepsByTypeCategory,u).subscribe(P=>{this.steps=P,this.steps&&this.steps.length>0&&this.editTicketData&&this.editTicketData.StepId&&this.groupMailForm.get("step")?.setValue(this.editTicketData.StepId)},P=>{console.log("erorrrrrrrrrrrrrrr")})})}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(g.Ix),e.rXU(k.w),e.rXU(f.J),e.rXU(y.h),e.rXU(c.Xi))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-ticket-creation"]],standalone:!1,decls:66,vars:19,consts:[[3,"title","isBackRequired"],[3,"ngSubmit","formGroup"],["size","12"],["position","stacked",1,"vo-form-label"],["color","danger"],[1,"widget-card-login-box"],["formControlName","type",3,"ngModelChange","disabled"],[3,"value",4,"ngFor","ngForOf"],[2,"text-align","center"],["name","circles","color","primary",4,"ngIf"],[4,"ngIf"],["formControlName","cat",3,"ionChange","disabled"],["formControlName","step",3,"disabled"],["formControlName","status",3,"disabled"],["formControlName","Feedback"],["formControlName","phone","type","number"],["expand","full","type","submit",3,"disabled"],[3,"value"],["name","circles","color","primary"]],template:function(r,o){1&r&&(e.nrm(0,"app-header-toolbar",0),e.j41(1,"ion-content")(2,"ion-card")(3,"form",1),e.bIt("ngSubmit",function(){return o.submitTicket()}),e.j41(4,"ion-row")(5,"ion-col",2)(6,"ion-label",3),e.EFF(7,"Topic "),e.j41(8,"ion-text",4),e.EFF(9,"*"),e.k0s()()()(),e.j41(10,"ion-card",5)(11,"ion-select",6),e.bIt("ngModelChange",function(){let p;return o.getCategoryListByType(null==(p=o.groupMailForm.get("type"))?null:p.value)}),e.DNE(12,D,2,2,"ion-select-option",7),e.k0s(),e.j41(13,"div",8),e.DNE(14,S,1,0,"ion-spinner",9),e.k0s()(),e.DNE(15,v,2,1,"ion-row",10),e.j41(16,"ion-row")(17,"ion-col",2)(18,"ion-label",3),e.EFF(19,"Activity "),e.j41(20,"ion-text",4),e.EFF(21,"*"),e.k0s()()()(),e.j41(22,"ion-card",5)(23,"ion-select",11),e.bIt("ionChange",function(){let p;return o.getStepsListByTypeCat(null==(p=o.groupMailForm.get("type"))?null:p.value,null==(p=o.groupMailForm.get("cat"))?null:p.value)}),e.DNE(24,I,2,2,"ion-select-option",7),e.k0s()(),e.DNE(25,A,2,1,"ion-row",10),e.j41(26,"ion-row")(27,"ion-col",2)(28,"ion-label",3),e.EFF(29,"Step "),e.j41(30,"ion-text",4),e.EFF(31,"*"),e.k0s()()()(),e.j41(32,"ion-card",5)(33,"ion-select",12),e.DNE(34,N,2,2,"ion-select-option",7),e.k0s()(),e.DNE(35,j,2,1,"ion-row",10),e.j41(36,"ion-row")(37,"ion-col",2)(38,"ion-label",3),e.EFF(39,"Status "),e.j41(40,"ion-text",4),e.EFF(41,"*"),e.k0s()()()(),e.j41(42,"ion-card",5)(43,"ion-select",13),e.DNE(44,C,2,2,"ion-select-option",7),e.k0s()(),e.DNE(45,R,2,1,"ion-row",10),e.j41(46,"ion-row")(47,"ion-col",2)(48,"ion-label",3),e.EFF(49,"Details "),e.j41(50,"ion-text",4),e.EFF(51,"*"),e.k0s()()()(),e.j41(52,"ion-card",5),e.nrm(53,"ion-textarea",14),e.k0s(),e.DNE(54,Y,2,1,"ion-row",10),e.j41(55,"ion-row")(56,"ion-col",2)(57,"ion-label",3),e.EFF(58,"Phone "),e.j41(59,"ion-text",4),e.EFF(60,"*"),e.k0s()()()(),e.j41(61,"ion-card",5),e.nrm(62,"ion-input",15),e.k0s(),e.DNE(63,J,2,1,"ion-row",10),e.j41(64,"ion-button",16),e.EFF(65,"Submit"),e.k0s()()()()),2&r&&(e.Y8G("title",o.heading)("isBackRequired",o.isBackRequired),e.R7$(3),e.Y8G("formGroup",o.groupMailForm),e.R7$(8),e.Y8G("disabled",o.isAPiCallInProcess),e.R7$(),e.Y8G("ngForOf",o.ticketTypes),e.R7$(2),e.Y8G("ngIf",o.isAPiCallInProcess),e.R7$(),e.Y8G("ngIf",o.groupMailForm.controls.type.dirty&&o.groupMailForm.controls.type.invalid),e.R7$(8),e.Y8G("disabled",o.isAPiCallInProcess),e.R7$(),e.Y8G("ngForOf",o.categories),e.R7$(),e.Y8G("ngIf",o.groupMailForm.controls.cat.dirty&&o.groupMailForm.controls.cat.invalid),e.R7$(8),e.Y8G("disabled",o.isAPiCallInProcess),e.R7$(),e.Y8G("ngForOf",o.steps),e.R7$(),e.Y8G("ngIf",o.groupMailForm.controls.step.dirty&&o.groupMailForm.controls.step.invalid),e.R7$(8),e.Y8G("disabled",o.isAPiCallInProcess),e.R7$(),e.Y8G("ngForOf",o.status),e.R7$(),e.Y8G("ngIf",o.groupMailForm.controls.status.dirty&&o.groupMailForm.controls.status.invalid),e.R7$(9),e.Y8G("ngIf",o.groupMailForm.controls.Feedback.dirty&&o.groupMailForm.controls.Feedback.invalid),e.R7$(9),e.Y8G("ngIf",o.groupMailForm.controls.phone.dirty&&o.groupMailForm.controls.phone.invalid),e.R7$(),e.Y8G("disabled",o.groupMailForm.invalid))},dependencies:[h.Sq,h.bT,t.qT,t.BC,t.cb,c.Jm,c.b_,c.hU,c.W9,c.$w,c.he,c.ln,c.Nm,c.Ip,c.w2,c.IO,c.nc,c.su,c.Je,c.Gw,t.j4,t.JD,M.M],styles:[".widget-card-login-box[_ngcontent-%COMP%]{background:#fff;box-shadow:none;border:1px solid var(--ion-color-primary);color:#000}"]})}}return i})()}];let V=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[g.iI.forChild(O),g.iI]})}}return i})();var X=n(5075);let x=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[h.MD,t.YN,c.bv,V,t.X1,X.HomePageModule]})}}return i})()}}]);