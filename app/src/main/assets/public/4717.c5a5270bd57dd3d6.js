"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4717],{4717:(b,p,r)=>{r.r(p),r.d(p,{MeetingroomPageModule:()=>Z});var h=r(177),t=r(4341),l=r(3465),u=r(9522),S=r(1626),c=r(1840),m=r(8359);class f extends m.yU{constructor(s,i){super()}schedule(s,i=0){return this}}const G={setInterval(o,s,...i){const{delegate:n}=G;return n?.setInterval?n.setInterval(o,s,...i):setInterval(o,s,...i)},clearInterval(o){const{delegate:s}=G;return(s?.clearInterval||clearInterval)(o)},delegate:void 0};var I=r(7908);const v={now:()=>(v.delegate||Date).now(),delegate:void 0};class P{constructor(s,i=P.now){this.schedulerActionCtor=s,this.now=i}schedule(s,i=0,n){return new this.schedulerActionCtor(this,s).schedule(n,i)}}P.now=v.now;const A=new class M extends P{constructor(s,i=P.now){super(s,i),this.actions=[],this._active=!1}flush(s){const{actions:i}=this;if(this._active)return void i.push(s);let n;this._active=!0;do{if(n=s.execute(s.state,s.delay))break}while(s=i.shift());if(this._active=!1,n){for(;s=i.shift();)s.unsubscribe();throw n}}}(class D extends f{constructor(s,i){super(s,i),this.scheduler=s,this.work=i,this.pending=!1}schedule(s,i=0){var n;if(this.closed)return this;this.state=s;const a=this.id,d=this.scheduler;return null!=a&&(this.id=this.recycleAsyncId(d,a,i)),this.pending=!0,this.delay=i,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(d,this.id,i),this}requestAsyncId(s,i,n=0){return G.setInterval(s.flush.bind(s,this),n)}recycleAsyncId(s,i,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return i;null!=i&&G.clearInterval(i)}execute(s,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(s,i);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(s,i){let a,n=!1;try{this.work(s)}catch(d){n=!0,a=d||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),a}unsubscribe(){if(!this.closed){const{id:s,scheduler:i}=this,{actions:n}=i;this.work=this.state=this.scheduler=null,this.pending=!1,(0,I.o)(n,this),null!=s&&(this.id=this.recycleAsyncId(i,s,null)),this.delay=null,super.unsubscribe()}}}),T=A;var k=r(1985),L=r(9470);const j=(0,r(7464).F3)("Jitsi",{web:()=>r.e(7185).then(r.bind(r,7185)).then(o=>new o.JitsiWeb)});var e=r(4438),R=r(2571),x=r(369),H=r(6886),J=r(5493);const B=()=>[0,1,2,3,4,5,6,7,8,9,10];function O(o,s){1&o&&(e.j41(0,"ion-card")(1,"ion-row")(2,"ion-col",3),e.nrm(3,"ion-skeleton-text",4),e.k0s()(),e.j41(4,"ion-row")(5,"ion-col",3),e.nrm(6,"ion-skeleton-text",4),e.k0s()(),e.j41(7,"ion-row")(8,"ion-col",3),e.nrm(9,"ion-skeleton-text",4),e.k0s()(),e.j41(10,"ion-row")(11,"ion-col",3),e.nrm(12,"ion-skeleton-text",4),e.k0s()(),e.j41(13,"ion-row")(14,"ion-col",3),e.nrm(15,"ion-skeleton-text",4),e.k0s()(),e.j41(16,"ion-row",5)(17,"ion-col",6),e.nrm(18,"ion-skeleton-text",4),e.k0s()()())}function V(o,s){1&o&&(e.j41(0,"ion-content")(1,"div")(2,"ion-list"),e.DNE(3,O,19,0,"ion-card",2),e.k0s()()()),2&o&&(e.R7$(3),e.Y8G("ngForOf",e.lJ4(1,B)))}function Y(o,s){1&o&&(e.j41(0,"ion-content")(1,"ion-list")(2,"ion-card",7)(3,"ion-row")(4,"ion-col",3)(5,"ion-text"),e.EFF(6,"Please Wait for the Host to Start this Session / Meeting."),e.k0s()()()()()())}function W(o,s){if(1&o){const i=e.RV6();e.j41(0,"ion-content")(1,"ion-list")(2,"ion-card",7)(3,"ion-row")(4,"ion-col",3)(5,"ion-text"),e.EFF(6,"You have ended the Session / Meeting "),e.k0s()()(),e.j41(7,"ion-row",5)(8,"ion-col",8)(9,"ion-button",9),e.bIt("click",function(){e.eBV(i);const a=e.XpG();return e.Njj(a.CheckIfHostLogin())}),e.EFF(10," Re-Join "),e.k0s()()()()()()}}function X(o,s){if(1&o){const i=e.RV6();e.j41(0,"ion-button",9),e.bIt("click",function(){e.eBV(i);const a=e.XpG(2);return e.Njj(a.validateAttendance())}),e.EFF(1," Validate Attendance "),e.k0s()}}function $(o,s){if(1&o){const i=e.RV6();e.j41(0,"ion-content")(1,"ion-list")(2,"ion-card",7)(3,"ion-row")(4,"ion-col",3)(5,"ion-text"),e.EFF(6,"You have ended the Session / Meeting "),e.k0s()()(),e.j41(7,"ion-row",5)(8,"ion-col",10)(9,"ion-button",9),e.bIt("click",function(){e.eBV(i);const a=e.XpG();return e.Njj(a.confirmAttendance())}),e.EFF(10," Confirm Attendance "),e.k0s()()(),e.j41(11,"ion-row",5)(12,"ion-col",10),e.DNE(13,X,2,0,"ion-button",11),e.k0s()()()()()}if(2&o){const i=e.XpG();e.R7$(13),e.Y8G("ngIf",1!=i.HasStudentRole&&0!=i.meetingId)}}let y=(()=>{class o{constructor(i,n,a,d,g){this.route=i,this.commonService=n,this.router=a,this.storage=d,this.apiCall=g,this.isAPiCallInProcess=!1,this.isErrorInApiCall=!1,this.isBackRequired=!1,this.isHostLogined=!1,this.route.params.subscribe(C=>this.meetingId=C.id)}ngOnInit(){this.meetingData=this.commonService.getSelectedMeeting(),this.CheckIfHostLogin(),this.heading=this.meetingData.Title,this.updateSubscription=function w(o=0,s=A){return o<0&&(o=0),function E(o=0,s,i=T){let n=-1;return null!=s&&((0,L.m)(s)?i=s:n=s),new k.c(a=>{let d=function F(o){return o instanceof Date&&!isNaN(o)}(o)?+o-i.now():o;d<0&&(d=0);let g=0;return i.schedule(function(){a.closed||(a.next(g++),0<=n?this.schedule(void 0,n):a.complete())},d)})}(o,o,s)}(5e3).subscribe(i=>{0==this.isHostLogined&&this.CheckIfHostLogin()})}ngOnDestroy(){this.updateSubscription.unsubscribe()}confirmAttendance(){this.storage.get("user").then(i=>{const n=JSON.parse(i);let a=new S.Nl;a=a.append("UserID",n.UserId),a=a.append("meetingId",this.meetingId),a=a.append("tenantName",n.TenantShortName),this.apiCall.login(c.h.urls.MeetingEnd,a).subscribe(d=>{this.commonService.presentToast("Attendance Logged Successfully",3e3),n.HasStudentRole&&this.router.navigate(["/meetings"])},d=>{console.log("Error on apicall")})})}CheckIfHostLogin(){this.storage.get("user").then(i=>{const n=JSON.parse(i);let a=new S.Nl;a=a.append("UserID",n.UserId),a=a.append("meetingId",this.meetingData.MeetingId),a=a.append("tenantName",n.TenantShortName),this.apiCall.login(c.h.urls.MeetingHostJoined,a).subscribe({next:d=>{this.isHostLogined=d.canStartMeeting,1==this.isHostLogined&&"0"===this.meetingId&&(this.meetingData.JWTToken=d.token,this.StartMeeting(this.meetingData))},error:d=>{console.log("erorrrrrrrrrrrrrrr")}})})}StartMeeting(i){this.storage.get("user").then(a=>{const d=JSON.parse(a);j.joinConference({url:i.MeetingDomain,roomName:i.RoomName,displayName:d.FullName,email:d.Email,avatarURL:null!=d.ProfileImage?d.ProfileImage:"",startWithAudioMuted:!0,startWithVideoMuted:!0,subject:i.Title,chatEnabled:!0,inviteEnabled:!1,liveStreamingEnabled:!1,token:i.JWTToken,configOverrides:{"chat.enabled":!0,"invite.enabled":!1,"kick-out.enabled":!1,"live-streaming.enabled":!1,"pip.enabled":!0,"raise-hand.enabled":!0,"recording.enabled":!0,"video-share.enabled":!0,"add-people.enabled":!1,"calendar.enabled":!1,"meeting-name.enabled":!0,"meeting-password.enabled":!1,"toolbox.alwaysVisible":!1,"close-captions.enabled":!0,"conference-timer.enabled":!0,"filmstrip.enabled":!0,"help.enabled":!1,"android.screensharing.enabled":!0,"speakerstats.enabled":!0,"reactions.enabled":!1,"security-options.enabled":!1,"tile-view.enabled":!0,"lobby-mode.enabled":!1}}).then(g=>{console.log("JitsiJoinSuccess "+g)}).catch(g=>{console.log("JitsiJoinError "+g)})})}validateAttendance(){this.router.navigate(["/staff-attendence-dashbord"])}closeMeeting(){this.isAPiCallInProcess=!0,this.storage.get("user").then(i=>{const n=JSON.parse(i);let a=new S.Nl;a=a.append("UserID",n.UserId),a=a.append("meetingId",this.meetingData.MeetingId),a=a.append("tenantName",n.TenantShortName),this.apiCall.login(c.h.urls.MeetingEnd,a).subscribe(d=>{this.commonService.setSelectedMeeting(this.meetingData),this.meetingId=this.meetingData.MeetingId,this.IsMeetingEnded=!0,n.HasStudentRole&&(this.HasStudentRole=n.HasStudentRole),this.isAPiCallInProcess=!1},d=>{console.log("Error on apicall")})})}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(u.nX),e.rXU(R.h),e.rXU(u.Ix),e.rXU(x.w),e.rXU(H.J))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-meetingroom"]],standalone:!1,decls:5,vars:6,consts:[[3,"title","isBackRequired"],[4,"ngIf"],[4,"ngFor","ngForOf"],["size","12"],["animated","",2,"width","100%"],[2,"border-top","1px solid #ffffff"],["size","4","offset","4"],[1,"lits-item--card"],["size","4","offset","5"],["size","small",3,"click"],["size","4"],["size","small",3,"click",4,"ngIf"]],template:function(n,a){1&n&&(e.nrm(0,"app-header-toolbar",0),e.DNE(1,V,4,2,"ion-content",1)(2,Y,7,0,"ion-content",1)(3,W,11,0,"ion-content",1)(4,$,14,1,"ion-content",1)),2&n&&(e.Y8G("title",a.heading)("isBackRequired",a.isBackRequired),e.R7$(),e.Y8G("ngIf",a.isAPiCallInProcess),e.R7$(),e.Y8G("ngIf",!a.isAPiCallInProcess&&0==a.isHostLogined&&0==a.meetingId),e.R7$(),e.Y8G("ngIf",!a.isAPiCallInProcess&&1==a.isHostLogined&&0==a.meetingId),e.R7$(),e.Y8G("ngIf",!a.isAPiCallInProcess&&1==a.IsMeetingEnded&&0!=a.meetingId))},dependencies:[h.Sq,h.bT,l.Jm,l.b_,l.hU,l.W9,l.nf,l.ln,l.ds,l.IO,J.M],encapsulation:2})}}return o})();const z=[{path:"",component:y},{path:":id",component:y}];let K=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[u.iI.forChild(z),u.iI]})}}return o})();var Q=r(5075);let Z=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[h.MD,t.YN,l.bv,K,Q.HomePageModule]})}}return o})()},1840:(b,p,r)=>{r.d(p,{h:()=>t});class t{static{this.mainPath="https://excelsis360.com/ExcelsisMobileAPI/"}static{this.urls={login:t.mainPath+"Login",circularList:t.mainPath+"GetCirculars",homeWorkList:t.mainPath+"GetStudentCoursePlanDetails",GetReportCard:t.mainPath+"GetStudentProgressReport",GetTenantNames:t.mainPath+"GetTenantsList",GetUserFeeDetails:t.mainPath+"GetUserFeeDetails",GetNotifications:t.mainPath+"GetNotifications",GetSyllabas:t.mainPath+"GetChapterTopicsByUserId",GetFeedbackList:t.mainPath+"GetFeedbackList",GetMeetingsList:t.mainPath+"GetMeetingsList",MeetingHostJoined:t.mainPath+"MeetingHostJoined",MeetingEnd:t.mainPath+"EndMeeting",getGropusList:t.mainPath+"GetGroupDropDowns",getStudentList:t.mainPath+"",startMeeting:t.mainPath+"JoinMeeting",sendGroupMail:t.mainPath+"SendGroupMail",GetStudentTodayAttendanceDetails:t.mainPath+"GetStudentTodayAttendanceDetails",GetStudentCurrentMonthAttendanceDetails:t.mainPath+"GetStudentCurrentMonthAttendanceDetails",GetStudentLastThreeMonthsAttendanceDetails:t.mainPath+"GetStudentLastThreeMonthsAttendanceDetails",GetCalendarEvents:t.mainPath+"GetCalendarEvents",GetStudentTermAttendanceDetails:t.mainPath+"GetStudentTermAttendanceDetails",SaveFeedback:t.mainPath+"SaveFeedback",AddFeedback:t.mainPath+"AddFeedback",GetFeedbackTypes:t.mainPath+"GetFeedbackTypes",GetFeedbackCategoriesByType:t.mainPath+"GetFeedbackCategoriesByType",GetFeedbackStepsByTypeCategory:t.mainPath+"GetFeedbackStepsByTypeCategory",GetGalleryList:t.mainPath+"GetUserDMS",GetAllNodes:t.mainPath+"getAllNodes",AddUserDMSFolder:t.mainPath+"AddUserDMSFolder",UpdateDMSFileName:t.mainPath+"UpdateDMSFileName",AddUserDMSFile:t.mainPath+"AddUserDMSFile",DeleteNode:t.mainPath+"DeleteNode",GetDMSPermissionList:t.mainPath+"GetDMSPermissionList",UpdateDMSPermissions:t.mainPath+"UpdateDMSPermissions",SiteLinks:t.mainPath+"GetSiteLinks",GetAttendanceSubjects:t.mainPath+"GetAttendanceSubjects",GetAttendanceAcademicYears:t.mainPath+"GetAttendanceAcademicYears",GetAttendanceTerms:t.mainPath+"GetAttendanceTerms",GetAttendanceSection:t.mainPath+"GetAttendanceSection",GetAttendanceStudentsList:t.mainPath+"GetAttendanceStudentsList",SaveStudentsAttendance:t.mainPath+"SaveStudentsAttendance",GetPaymentOrderId:t.mainPath+"GetPaymentOrderId",GetTransactionDues:t.mainPath+"GetTransactionDues",GetTransactionsPaid:t.mainPath+"GetTransactionsPaid",ValidatePaymentCaptured:t.mainPath+"ValidatePaymentCaptured",DeleteCalendarEvent:t.mainPath+"DeleteCalendarEvent",AddCalendarEvents:t.mainPath+"AddCalendarEvents",GetCommunicatorTypes:t.mainPath+"GetCommunicatorTypes",GetFormsByType:t.mainPath+"GetFormsByType",SendCommunicator:t.mainPath+"SendCommunicator",GetStaffAttendanceRoles:t.mainPath+"GetStaffAttendanceRoles",GetStaffAttendance:t.mainPath+"GetStaffAttendance",SaveStaffAttendance:t.mainPath+"SaveStaffAttendance",GetUsersAsync:t.mainPath+"GetUsersAsync",GetDynamicDashboardsList:t.mainPath+"GetDynamicDashboardsList",GetDynamicDashboardAsync:t.mainPath+"GetDynamicDashboardAsync",GetTrips:t.mainPath+"GetTrips",UpdateTripLocation:t.mainPath+"UpdateTripLocation",GetBusLocationByTripId:t.mainPath+"GetBusLocationByTripId",EndTrip:t.mainPath+"EndTrip",GetTripDropDowns:t.mainPath+"GetTripDropDowns",CreateTrip:t.mainPath+"CreateTrip",SaveGpsAttendance:t.mainPath+"SaveGpsAttendance",GetGpsAttendance:t.mainPath+"GetGpsAttendance",LogMobileFirebaseToken:t.mainPath+"LogMobileFirebaseToken"}}}},6886:(b,p,r)=>{r.d(p,{J:()=>l});var h=r(1626),t=r(4438);let l=(()=>{class u{constructor(c){this.http=c}getHeadres(){let c=new h.Lr;return c.append("Content-Type","application/json"),c}addItemToList(c,m){let f=new h.Lr;return f.append("Content-Type","application/json"),this.http.post(c,m,{headers:f})}login(c,m){return this.http.get(c,{params:m})}registerUser(c,m){return(new h.Lr).append("Content-Type","application/x-www-form-urlencoded"),this.http.post(c,m,{headers:this.getHeadres()})}getCirculerList(c){return this.http.get(c)}static{this.\u0275fac=function(m){return new(m||u)(t.KVO(h.Qq))}}static{this.\u0275prov=t.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})()}}]);